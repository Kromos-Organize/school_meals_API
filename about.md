# Сущности БД
* Администратор системы (роли: ?)
* Пользователь системы (роли: менеджер школы / учитель)
* Школа
* Класс
* Ученик 
* Меню 
* Типы меню
* Цена за меню (полная / субсидированная)
* Телефоны родителей учеников
* Сессия пользователя

>

## Начальный флоу

- Пользователь  регистрируется в системе, получает роль админа  (/registration)
- Админ авторизуется в системе (зачем поле isActive?), получает токены  (/login)
- Админ создаёт менеджера школы по пищеблоку (users/create")
- Менеджер авторизуется в системе, получает токены (/login)
- Менеджер создает школу (с апдейтом school_id менеджера) ('school')
- Менеджер создает меню для школы ('menu')
- Менеджер создает тип меню для школы (если 3 значения в энамку бы в меню ?)  ('type-menu')
- Менеджер создает цены за меню (полная / субсидированная) (не нашёл эндпойнт ?)  ('???')
- Менеджер создает класс школы ('class')
- Менеджер создает учеников класса (isLargeFamilies: false можно в дефолты таблицы установить) вместе с телефонами родителей ('student')
- ?

## Ежедневный флоу менеджера / учителя 
- Поверяет присутствие учеников в школе ?
- Формирует списки учеников на приемы еды
- ?

## Ежемесячный флоу менеджера / учителя 
- Формирует месячные отчеты по питанию с разбивками по категориям цен и прочими
- Обновляет меню 
- ?

## Ежегодный флоу менеджера / учителя 
- В мае обновляет списки учеников для выпуска / перехода в другой класс
- В сентябре обновляет списки учеников с новыми / убывшими
- ?

## Периодический флоу менеджера / учителя
- Изменяет телефоны родителей
- Изменяет категорию ученика(скидка)
- Переводит ученика в параллельный класс
- ?

> 

# Подробное описание сущностей
### *Администратор*
  + Права:
    + Создается самостоятельно(?)
    + Полный доступ к базе
  + Поля:
    + id: number;
    + email: string
    + password: string;
    + **role**: string;  
    + fname: string;
    + name: string;
    + position: string;
    + chat_number: string;
    

### *Пользователь*
+ Права:
    + Создается самостоятельно
    + В роли менеджера создает школу, классы, меню, цены
    + В роли учителя создает учеников, телефоны родителей
    + Требуется активация по электронной почте
+ Поля:
    + id: number;
    + school_id: number;
    + **role**: string;
    + email: string;
    + password: string;
    + phone: string;
    + fname: string;
    + name: string;
    + lname: string;
    + birthday: Date;
    + **isActive**: boolean;

### *Школа*
+ Права:
    + Создается пользователем (админом?)
+ Поля:
    + school_id: number;
    + name: string
    + region: string
    + area: string
    + city: string
    + street: string
    + homeNumber: number

### *Класс*
+ Права:
    + Создается менеджером / учителем после создания школы
+ Поля:
    + class_id: number;
    + school_id: number;
    + number: number;
    + type: string;
    + category: ClassCategoryEnum;

### *Ученик*
+ Права:
    + Создается менеджером / учителем после создания класса вместе с телефонами родителей
    + Уровень цен меню определяется по isLargeFamilies
+ Поля:
    + student_id: number;
    + school_id: number;
    + class_id: number;
    + fname: string;
    + name: string;
    + lname: string;
    + birthday: Date;
    + isLargeFamilies: boolean;

### *Меню*
+ Права:
    + Создается менеджером/учителем после создания школы / класса
+ Поля:
    + menu_id: number;
    + school_id: number;
    + type_id: number;
    + paid_price: number;
    + free_price: number;
    + date: Date;

### *Тип меню*
+ Права:
    + Создается менеджером/учителем после/во время создания меню ?
    + Типы: Завтрак / Обед / Полдник ?
+ Поля:
    + type_id: number;
    + school_id: number;
    + type_menu: string;

### *Телефоны родителей учеников*
+ Права:
    + Создается менеджером/учителем во время создания ученика 
    + Типы: Завтрак / Обед / Полдник ?
+ Поля:
    + phone_id: number;
    + student_id: number;
    + m_phone: string;
    + f_phone: string;

### *Сессия пользователя*
+ Права:
    + Сохраняет залогиненных пользователей вместе с выдачей в куки рефреш-токена на 30 дней
+ Поля:
    + session_id: number;
    + user_id: number;
    + device_name: string;
    + ip: string;
    + issued_at: Date;
    + last_usage_at: Date;
    + expires_at: Date;
    + logged_out: boolean;